<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Building Secure, Robust and Auditable Docker Containers</title>

		<link rel="stylesheet" href="css/reset.css">
		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css">

		<link rel="stylesheet" href="css/presentation.css"

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/monokai.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section id="title" data-markdown data-background-image="images/backgrounds/containers.jpg" data-background-opacity="0.2">
					<textarea data-template>
						## Building<br/>Secure, Robust and Auditable<br/>Docker Containers

						<br/>
						<p style="font-size: 0.6em">Pete Sellars<br/>
						Cloud Engineer @ Catosplace/Hypr</p>
					</textarea>
				</section>
				<section id="introduction">
					<section data-markdown data-background-image="images/backgrounds/imposter_syndrome.jpg" data-background-opacity="0.2">
						<textarea data-template>
							## I am a</br>Cloud Engineer!
						</textarea>
					</section>
					<section data-markdown data-background-image="images/backgrounds/imposter_syndrome.jpg" data-background-opacity="0.2">
						<textarea data-template>
							![MaximumSecurity](images/memes/maximum-security.jpg)
							![ComplianceFail](images/memes/compliance-fail.jpg)
						</textarea>
					</section>
					<section data-markdown data-background-image="images/backgrounds/imposter_syndrome.jpg" data-background-opacity="0.2">
						<textarea data-template>
							## Experience<br/>without<br/>Expertise
							![ContainerFail](images/memes/container-fail.jpg)
						</textarea>
					</section>
					<section data-markdown data-background-image="images/backgrounds/burning-money.jpg" data-background-opacity="0.2">
						<textarea data-template>
							![WordCloud](images/wordcloud.png)
						</textarea>
					</section>
				</section>
				<section id="whatwillwecover">
					<section data-markdown data-background-image="images/backgrounds/builders.jpg" data-background-opacity="0.2">
						<textarea data-template>
							## What Will We Cover?
						</textarea>
					</section>
					<section data-markdown data-background-image="images/backgrounds/builders.jpg" data-background-opacity="0.2">
						<textarea data-template>
							**Development Practices**<br/>
							**Policies**<br/>
							**Software Supply Chain**<br/>
							**Trusted Content**<br/>
							**Operational Concerns**
						</textarea>
					</section>
					<section data-markdown data-background-image="images/backgrounds/builders.jpg" data-background-opacity="0.2">
						<textarea data-template>
							![SecurityIcon](images/icons/security.png)
							![RobustIcon](images/icons/robust.png)
							![AuditIcon](images/icons/audit.png)
						</textarea>
					</section>
				</section>
				<section id="developmentpractices">
					<section data-markdown data-background-image="images/backgrounds/developer.jpg" data-background-opacity="0.2">
						<textarea data-template>
							![SecurityIcon](images/icons/security.png)
							![RobustIcon2](images/icons/robust.png)
							![AuditIcon3](images/icons/audit.png)
							## Development<br/>Practices
							![DevPractices](images/memes/devpractices.png)
						</textarea>
					</section>
					<section data-markdown data-background-image="images/backgrounds/developer.jpg" data-background-opacity="0.2">
						<div id="robust-icon" class="robust-icon"></div>
						<textarea data-template>
							![RobustIcon](images/icons/robust.png)
							## Static Analysis
							**Hadolint**

							```
							docker run --rm -i hadolint/hadolint:v1.17.5 < Dockerfile
							```

							<p class="para">Ignore Rules</p>

							```
							docker run --rm -i hadolint/hadolint:v1.17.5 
							  hadolint --ignore DL3018 < Dockerfile
							```

							<p class="para">Ignore Rules (.hadolint.yaml)</p>

							```
							ignored:
							  - DL3018
							```

							<p class="para">Ignore Rules (inline)</p>

							```
							# hadolint ignore=DL3018
							Run cd /tmp && echo "hello!"
							```
						</textarea>
					</section>
					<section data-markdown data-background-image="images/backgrounds/developer.jpg" data-background-opacity="0.2">
						<div id="robust-icon" class="robust-icon">TEST</div>
						<textarea data-template>
							![SecurityIcon](images/icons/security.png)
							![RobustIcon2](images/icons/robust.png)
							## Content Download Checksums

							<p class="para">Verify using Checksum in Dockerfile</p>

							```
							RUN wget \
								https://github.com/example/download/app.tar.gz

							RUN wget \
								https://github.com/example/download/app_checksums.txt \
								&& sed -i '/app/!d' "app_checksums.txt" \
								&& sha256sum -cs "app_checksums.txt" \
								&& tar -xzvf app
							```
						</textarea>
					</section>
					<section data-markdown data-background-image="images/backgrounds/developer.jpg" data-background-opacity="0.2">
						<div id="robust-icon" class="robust-icon"></div>
						<textarea data-template>
							![SecurityIcon](images/icons/security.png)
							![RobustIcon2](images/icons/robust.png)
							### Testing with<br/>goss/dgoss

							<p class="para">Run Tests</p>

							```
							dgoss run our_app
							```

							<p class="para">Edit Tests</p>

							```
							dgoss edit our_app
							```

							<p class="para">Writing Initial Tests</p>

							```
							goss add process
							exit
							```

							<p class="para">goss.yaml</p>

							```
							process:
							  app:
							    running: true
							```
						</textarea>
					</section>
					<section data-markdown data-background-image="images/backgrounds/developer.jpg" data-background-opacity="0.2">
						<div id="robust-icon" class="robust-icon"></div>
						<textarea data-template>
							![RobustIcon](images/icons/robust.png)
							## Versioning

							<p class="para">Use a VERSION file</p>

							```
							0.0.1
							```

							<p class="para">Tag using the VERSION file</p>

							```
							version=`cat VERSION`
							docker tag org/app:$version
							```

							<p class="para">Using the Git SHA</p>

							```
							version=`cat VERSION`
							docker tag org/app:$version-GIT_SHA
							```
						</textarea>
					</section>
					<section data-markdown data-background-image="images/backgrounds/developer.jpg" data-background-opacity="0.2">
						<div id="robust-icon" class="robust-icon"></div>
						<textarea data-template>
							![SecurityIcon](images/icons/security.png)
							![RobustIcon2](images/icons/robust.png)
							![AuditIcon3](images/icons/audit.png)
							## Pipelines

							<p class="para">Simple Makefile Target</p>

							```
							lint:
							  @echo "Linting the Hugo Builder container..."
							  @docker run --rm -i hadolint/hadolint:v1.17.5-alpine \
								hadolint --ignore DL3018 - < Dockerfile
								@echo "Linting completed!" 
							```

							<p class="para">Simple Makefile Release Pipeline</p>

							```
							release: lint test check-policies bom version sign-image
							```
						</textarea>
					</section>
				</section>
				<section id="policies">
					<section data-markdown>
						<textarea data-template>
							![SecurityIcon](images/icons/security.png)
							![RobustIcon2](images/icons/robust.png)
							![AuditIcon3](images/icons/audit.png)
							# Policies
						</textarea>
					</section>
				</section>
				<section data-markdown class="references" data-background-image="images/backgrounds/containers.jpg" data-background-opacity="0.2">
					<textarea data-template>
						##### References
						* Hadolint - https://github.com/hadolint/hadolint
						* Best practices for writing Dockerfiles - https://docs.docker.com/develop/develop-images/dockerfile_best-practices/
						* 6 Dockerfile tips from the Official Images - https://blog.container-solutions.com/6-dockerfile-tips-official-images
						* goss - https://github.com/aelsabbahy/goss
						* dgoss - https://github.com/aelsabbahy/goss/tree/master/extras/dgoss
						* How to test your Docker image in half a second - https://medium.com/@aelsabbahy/tutorial-how-to-test-your-docker-image-in-half-a-second-bbd13e06a4a9
						* How to Version Your Docker Images - https://medium.com/better-programming/how-to-version-your-docker-images-1d5c577ebf54
						* Icons made by <a href="https://www.flaticon.com/authors/freepik" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a>
					</textarea>
				</section>
			</div>
			<div id="catosplace-logo" class="catosplace-logo"></div>
			<div id="hypr-logo" class="hypr-logo"></div>
		</div>

		<script src="js/reveal.js"></script>

		<script>
			// More info about config & dependencies:
			// - https://github.com/hakimel/reveal.js#configuration
			// - https://github.com/hakimel/reveal.js#dependencies
			Reveal.initialize({
				hash: false,
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/highlight/highlight.js' },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});
		</script>
	</body>
</html>
